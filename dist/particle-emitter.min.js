this.PIXI=this.PIXI||{},function(t,e){"use strict";class i{constructor(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}init(t){if(t&&t.length)if(Array.isArray(t[0]))for(let e=0;e<t.length;++e){const i=t[e];let s=i[0];for(let t=1;t<i.length;++t){const e=i[t];this.segments.push({p1:s,p2:e,l:0}),s=e}}else{let e=t[0];for(let i=1;i<t.length;++i){const s=t[i];this.segments.push({p1:e,p2:s,l:0}),e=s}}else this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});for(let t=0;t<this.segments.length;++t){const{p1:e,p2:i}=this.segments[t],s=Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y));this.segments[t].l=s,this.totalLength+=s,this.countingLengths.push(this.totalLength)}}getRandPos(t){const e=Math.random()*this.totalLength;let i,s;if(1===this.segments.length)i=this.segments[0],s=e;else for(let t=0;t<this.countingLengths.length;++t)if(e<this.countingLengths[t]){i=this.segments[t],s=0===t?e:e-this.countingLengths[t-1];break}s/=i.l||1;const{p1:a,p2:r}=i;t.x=a.x+s*(r.x-a.x),t.y=a.y+s*(r.y-a.y)}}i.type="polygonalChain",i.editorConfig=null;class s{constructor(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h}getRandPos(t){t.x=Math.random()*this.w+this.x,t.y=Math.random()*this.h+this.y}}s.type="rect",s.editorConfig=null;class a{constructor(t,e,i){this.value=t,this.time=e,this.next=null,this.isStepped=!1,this.ease=i?"function"==typeof i?i:f(i):null}static createList(t){if("list"in t){const e=t.list;let i;const{value:s,time:r}=e[0],n=i=new a("string"==typeof s?u(s):s,r,t.ease);if(e.length>2||2===e.length&&e[1].value!==s)for(let t=1;t<e.length;++t){const{value:s,time:r}=e[t];i.next=new a("string"==typeof s?u(s):s,r),i=i.next}return n.isStepped=!!t.isStepped,n}const e=new a("string"==typeof t.start?u(t.start):t.start,0);return t.end!==t.start&&(e.next=new a("string"==typeof t.end?u(t.end):t.end,1)),e}}let r=e.Texture.from;const n=!1,o=Math.PI/180;function h(t,e){if(!t)return;const i=Math.sin(t),s=Math.cos(t),a=e.x*s-e.y*i,r=e.x*i+e.y*s;e.x=a,e.y=r}function l(t,e,i){return t<<16|e<<8|i}function c(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function p(t){const e=1/c(t);t.x*=e,t.y*=e}function m(t,e){t.x*=e,t.y*=e}function u(t,e){let i;return e||(e={}),"#"===t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8===t.length&&(i=t.substr(0,2),t=t.substr(2)),e.r=parseInt(t.substr(0,2),16),e.g=parseInt(t.substr(2,2),16),e.b=parseInt(t.substr(4,2),16),i&&(e.a=parseInt(i,16)),e}function f(t){const e=t.length,i=1/e;return function(s){const a=e*s|0,r=(s-a*i)*e,n=t[a]||t[e-1];return n.s+r*(2*(1-r)*(n.cp-n.s)+r*(n.e-n.s))}}function d(t){return t||"normal"}var g={__proto__:null,DEG_TO_RADS:o,GetTextureFromString:r,combineRGBComponents:l,createSteppedGradient:function(t,e=10){("number"!=typeof e||e<=0)&&(e=10);const i=new a(u(t[0].value),t[0].time);i.isStepped=!0;let s=i,r=t[0],n=1,o=t[n];for(let i=1;i<e;++i){let h=i/e;for(;h>o.time;)r=o,o=t[++n];h=(h-r.time)/(o.time-r.time);const l=u(r.value),c=u(o.value),p={r:(c.r-l.r)*h+l.r,g:(c.g-l.g)*h+l.g,b:(c.b-l.b)*h+l.b};s.next=new a(p,i/e),s=s.next}return i},generateEase:f,getBlendMode:d,hexToRGB:u,length:c,normalize:p,rotatePoint:h,scaleBy:m,verbose:n};class x{constructor(t){this.x=t.x||0,this.y=t.y||0,this.radius=t.radius,this.innerRadius=t.innerRadius||0,this.rotation=!!t.affectRotation}getRandPos(t){this.innerRadius!==this.radius?t.x=Math.random()*(this.radius-this.innerRadius)+this.innerRadius:t.x=this.radius,t.y=0;const e=Math.random()*Math.PI*2;this.rotation&&(t.rotation+=e),h(e,t.position),t.position.x+=this.x,t.position.y+=this.y}}x.type="torus",x.editorConfig=null;var v;!function(t){t[t.Spawn=0]="Spawn",t[t.Normal=2]="Normal",t[t.Late=5]="Late"}(v||(v={}));class y{constructor(t){this.order=v.Late,this.minStart=t.minStart,this.maxStart=t.maxStart,this.accel=t.accel,this.rotate=!!t.rotate,this.maxSpeed=t.maxSpeed??0}initParticles(t){let i=t;for(;i;){const t=Math.random()*(this.maxStart-this.minStart)+this.minStart;i.config.velocity?i.config.velocity.set(t,0):i.config.velocity=new e.Point(t,0),h(i.rotation,i.config.velocity),i=i.next}}updateParticle(t,e){const i=t.config.velocity,s=i.x,a=i.y;if(i.x+=this.accel.x*e,i.y+=this.accel.y*e,this.maxSpeed){const t=c(i);t>this.maxSpeed&&m(i,this.maxSpeed/t)}t.x+=(s+i.x)/2*e,t.y+=(a+i.y)/2*e,this.rotate&&(t.rotation=Math.atan2(i.y,i.x))}}function P(t){return this.ease&&(t=this.ease(t)),(this.first.next.value-this.first.value)*t+this.first.value}function _(t){this.ease&&(t=this.ease(t));const e=this.first.value,i=this.first.next.value;return l((i.r-e.r)*t+e.r,(i.g-e.g)*t+e.g,(i.b-e.b)*t+e.b)}function w(t){this.ease&&(t=this.ease(t));let e=this.first,i=e.next;for(;t>i.time;)e=i,i=i.next;return t=(t-e.time)/(i.time-e.time),(i.value-e.value)*t+e.value}function S(t){this.ease&&(t=this.ease(t));let e=this.first,i=e.next;for(;t>i.time;)e=i,i=i.next;t=(t-e.time)/(i.time-e.time);const s=e.value,a=i.value;return l((a.r-s.r)*t+s.r,(a.g-s.g)*t+s.g,(a.b-s.b)*t+s.b)}function C(t){this.ease&&(t=this.ease(t));let e=this.first;for(;e.next&&t>e.next.time;)e=e.next;return e.value}function b(t){this.ease&&(t=this.ease(t));let e=this.first;for(;e.next&&t>e.next.time;)e=e.next;const i=e.value;return l(i.r,i.g,i.b)}y.type="moveAcceleration",y.editorConfig=null;class L{constructor(t=!1){this.first=null,this.isColor=!!t,this.interpolate=null,this.ease=null}reset(t){this.first=t;t.next&&t.next.time>=1?this.interpolate=this.isColor?_:P:t.isStepped?this.interpolate=this.isColor?b:C:this.interpolate=this.isColor?S:w,this.ease=this.first.ease}}class M{constructor(t){this.order=v.Normal,this.list=new L(!1),this.list.reset(a.createList(t.alpha))}initParticles(t){let e=t;for(;e;)e.alpha=this.list.first.value,e=e.next}updateParticle(t){t.alpha=this.list.interpolate(t.agePercent)}}M.type="alpha",M.editorConfig=null;class B{constructor(t){this.order=v.Normal,this.value=t.alpha}initParticles(t){let e=t;for(;e;)e.alpha=this.value,e=e.next}}function E(t){const i=[];for(let s=0;s<t.length;++s){let a=t[s];if("string"==typeof a)i.push(r(a));else if(a instanceof e.Texture)i.push(a);else{let t=a.count||1;for(a="string"==typeof a.texture?r(a.texture):a.texture;t>0;--t)i.push(a)}}return i}B.type="alphaStatic",B.editorConfig=null;class R{constructor(t){this.order=v.Normal,this.anims=[];for(let e=0;e<t.anims.length;++e){const i=t.anims[e],s=E(i.textures),a=i.framerate<0?-1:i.framerate>0?i.framerate:60,r={textures:s,duration:a>0?s.length/a:0,framerate:a,loop:a>0&&!!i.loop};this.anims.push(r)}}initParticles(t){let e=t;for(;e;){const t=Math.floor(Math.random()*this.anims.length),i=e.config.anim=this.anims[t];e.texture=i.textures[0],e.config.animElapsed=0,-1===i.framerate?(e.config.animDuration=e.maxLife,e.config.animFramerate=i.textures.length/e.maxLife):(e.config.animDuration=i.duration,e.config.animFramerate=i.framerate),e=e.next}}updateParticle(t,i){const s=t.config,a=s.anim;s.animElapsed+=i,s.animElapsed>=s.animDuration&&(s.anim.loop?s.animElapsed=s.animElapsed%s.animDuration:s.animElapsed=s.animDuration-1e-6);const r=s.animElapsed*s.animFramerate+1e-7|0;t.texture=a.textures[r]||a.textures[a.textures.length-1]||e.Texture.EMPTY}}R.type="animatedRandom",R.editorConfig=null;class F{constructor(t){this.order=v.Normal;const e=t.anim,i=E(e.textures),s=e.framerate<0?-1:e.framerate>0?e.framerate:60;this.anim={textures:i,duration:s>0?i.length/s:0,framerate:s,loop:s>0&&!!e.loop}}initParticles(t){let e=t;const i=this.anim;for(;e;)e.texture=i.textures[0],e.config.animElapsed=0,-1===i.framerate?(e.config.animDuration=e.maxLife,e.config.animFramerate=i.textures.length/e.maxLife):(e.config.animDuration=i.duration,e.config.animFramerate=i.framerate),e=e.next}updateParticle(t,i){const s=this.anim,a=t.config;a.animElapsed+=i,a.animElapsed>=a.animDuration&&(s.loop?a.animElapsed=a.animElapsed%a.animDuration:a.animElapsed=a.animDuration-1e-6);const r=a.animElapsed*a.animFramerate+1e-7|0;t.texture=s.textures[r]||s.textures[s.textures.length-1]||e.Texture.EMPTY}}F.type="animatedSingle",F.editorConfig=null;class T{constructor(t){this.order=v.Normal,this.value=t.blendMode}initParticles(t){let e=t;for(;e;)e.blendMode=d(this.value),e=e.next}}T.type="blendMode",T.editorConfig=null;class k{constructor(t){this.order=v.Spawn,this.spacing=t.spacing*o,this.start=t.start*o,this.distance=t.distance}initParticles(t){let e=0,i=t;for(;i;){let t;t=this.spacing?this.start+this.spacing*e:Math.random()*Math.PI*2,i.rotation=t,this.distance&&(i.position.x=this.distance,h(t,i.position)),i=i.next,++e}}}k.type="spawnBurst",k.editorConfig=null;class A{constructor(t){this.order=v.Normal,this.list=new L(!0),this.list.reset(a.createList(t.color))}initParticles(t){let e=t;const i=this.list.first.value,s=l(i.r,i.g,i.b);for(;e;)e.tint=s,e=e.next}updateParticle(t){t.tint=this.list.interpolate(t.agePercent)}}A.type="color",A.editorConfig=null;class I{constructor(t){this.order=v.Normal;let e=t.color;"#"===e.charAt(0)?e=e.substr(1):0===e.indexOf("0x")&&(e=e.substr(2)),this.value=parseInt(e,16)}initParticles(t){let e=t;for(;e;)e.tint=this.value,e=e.next}}I.type="colorStatic",I.editorConfig=null;class N{constructor(t){this.order=v.Normal,this.index=0,this.textures=t.textures.map((t=>"string"==typeof t?r(t):t))}initParticles(t){let e=t;for(;e;)e.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),e=e.next}}N.type="textureOrdered",N.editorConfig=null;const O=new e.Point,U=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],q=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(U).join("|"),"g");class D{constructor(t){if(this.order=v.Late,t.path)if("function"==typeof t.path)this.path=t.path;else try{this.path=function(t){const e=t.match(q);for(let t=e.length-1;t>=0;--t)U.indexOf(e[t])>=0&&(e[t]=`Math.${e[t]}`);return t=e.join(""),new Function("x",`return ${t};`)}(t.path)}catch(t){n,this.path=null}else this.path=t=>t;this.list=new L(!1),this.list.reset(a.createList(t.speed)),this.minMult=t.minMult??1}initParticles(t){let i=t;for(;i;){i.config.initRotation=i.rotation,i.config.initPosition?i.config.initPosition.copyFrom(i.position):i.config.initPosition=new e.Point(i.x,i.y),i.config.movement=0;const t=Math.random()*(1-this.minMult)+this.minMult;i.config.speedMult=t,i=i.next}}updateParticle(t,e){const i=this.list.interpolate(t.agePercent)*t.config.speedMult,s=t.emitter.getBehavior("randomSeed");t.config.movement+=i*e,O.x=t.config.movement,O.y=this.path(O.x,O.y,t.agePercent,t.maxLife,s?.randomSeed),h(t.config.initRotation,O),t.position.x=t.config.initPosition.x+O.x,t.position.y=t.config.initPosition.y+O.y}}D.type="movePath",D.editorConfig=null;class W{constructor(){this.order=v.Spawn}initParticles(t){}}W.type="spawnPoint",W.editorConfig=null;class G{constructor(t){this.order=v.Normal,this.textures=t.textures.map((t=>"string"==typeof t?r(t):t))}initParticles(t){let e=t;for(;e;){const t=Math.floor(Math.random()*this.textures.length);e.texture=this.textures[t],e=e.next}}}G.type="textureRandom",G.editorConfig=null;class V{constructor(t){this.order=v.Normal,this.minStart=t.minStart*o,this.maxStart=t.maxStart*o,this.minSpeed=t.minSpeed*o,this.maxSpeed=t.maxSpeed*o,this.accel=t.accel*o}initParticles(t){let e=t;for(;e;)this.minStart===this.maxStart?e.rotation+=this.maxStart:e.rotation+=Math.random()*(this.maxStart-this.minStart)+this.minStart,e.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,e=e.next}updateParticle(t,e){if(this.accel){const i=t.config.rotSpeed;t.config.rotSpeed+=this.accel*e,t.rotation+=(t.config.rotSpeed+i)/2*e}else t.rotation+=t.config.rotSpeed*e}}V.type="rotation",V.editorConfig=null;class X{constructor(t){this.order=v.Normal,this.min=t.min*o,this.max=t.max*o}initParticles(t){let e=t;for(;e;)this.min===this.max?e.rotation+=this.max:e.rotation+=Math.random()*(this.max-this.min)+this.min,e=e.next}}X.type="rotationStatic",X.editorConfig=null;class ${constructor(t){this.order=v.Late+1,this.rotation=(t.rotation||0)*o}initParticles(t){let e=t;for(;e;)e.rotation=this.rotation,e=e.next}}$.type="noRotation",$.editorConfig=null;class j{constructor(t){this.order=v.Normal,this.list=new L(!1),this.list.reset(a.createList(t.scale)),this.minMult=t.minMult??1}initParticles(t){let e=t;for(;e;){const t=Math.random()*(1-this.minMult)+this.minMult;e.config.scaleMult=t,e.scale.x=e.scale.y=this.list.first.value*t,e=e.next}}updateParticle(t){t.scale.x=t.scale.y=this.list.interpolate(t.agePercent)*t.config.scaleMult}}j.type="scale",j.editorConfig=null;class Q{constructor(t){this.order=v.Normal,this.min=t.min,this.max=t.max}initParticles(t){let e=t;for(;e;){const t=Math.random()*(this.max-this.min)+this.min;e.scale.x=e.scale.y=t,e=e.next}}}Q.type="scaleStatic",Q.editorConfig=null;class Y{static registerShape(t,e){Y.shapes[e||t.type]=t}constructor(t){this.order=v.Spawn;const e=Y.shapes[t.type];if(!e)throw new Error(`No shape found with type '${t.type}'`);this.shape=new e(t.data)}initParticles(t){let e=t;for(;e;)this.shape.getRandPos(e),e=e.next}}Y.type="spawnShape",Y.editorConfig=null,Y.shapes={},Y.registerShape(i),Y.registerShape(s),Y.registerShape(x),Y.registerShape(x,"circle");class z{constructor(t){this.order=v.Normal,this.texture="string"==typeof t.texture?r(t.texture):t.texture}initParticles(t){let e=t;for(;e;)e.texture=this.texture,e=e.next}}z.type="textureSingle",z.editorConfig=null;class H{constructor(t){this.order=v.Late,this.list=new L(!1),this.list.reset(a.createList(t.speed)),this.minMult=t.minMult??1}initParticles(t){let i=t;for(;i;){const t=Math.random()*(1-this.minMult)+this.minMult;i.config.speedMult=t,i.config.velocity?i.config.velocity.set(this.list.first.value*t,0):i.config.velocity=new e.Point(this.list.first.value*t,0),h(i.rotation,i.config.velocity),i=i.next}}updateParticle(t,e){const i=this.list.interpolate(t.agePercent)*t.config.speedMult,s=t.config.velocity;p(s),m(s,i),t.x+=s.x*e,t.y+=s.y*e}}H.type="moveSpeed",H.editorConfig=null;class J{constructor(t){this.order=v.Late,this.min=t.min,this.max=t.max}initParticles(t){let i=t;for(;i;){const t=Math.random()*(this.max-this.min)+this.min;i.config.velocity?i.config.velocity.set(t,0):i.config.velocity=new e.Point(t,0),h(i.rotation,i.config.velocity),i=i.next}}updateParticle(t,e){const i=t.config.velocity;t.x+=i.x*e,t.y+=i.y*e}}J.type="moveSpeedStatic",J.editorConfig=null;class K{constructor(){this.order=v.Spawn,this.randomSeed=Math.random()}initParticles(t){}}K.type="randomSeed",K.editorConfig=null;class Z extends e.Sprite{constructor(t){super(),this.prevChild=this.nextChild=null,this.emitter=t,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(t){this.maxLife=t,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}const tt=e.Ticker.shared,et=Symbol("Position particle per emitter position");class it{static registerBehavior(t){it.knownBehaviors[t.type]=t}constructor(t,i){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new e.Point,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new e.Point,this._prevEmitterPos=new e.Point,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,i&&this.init(i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}get frequency(){return this._frequency}set frequency(t){this._frequency="number"==typeof t&&t>0?t:1}get parent(){return this._parent}set parent(t){this.cleanup(),this._parent=t}init(t){if(!t)return;this.cleanup(),this._origConfig=t,this.minLifetime=t.lifetime.min,this.maxLifetime=t.lifetime.max,t.ease?this.customEase="function"==typeof t.ease?t.ease:f(t.ease):this.customEase=null,this.particlesPerWave=1,t.particlesPerWave&&t.particlesPerWave>1&&(this.particlesPerWave=t.particlesPerWave),this.frequency=t.frequency,this.spawnChance="number"==typeof t.spawnChance&&t.spawnChance>0?t.spawnChance:1,this.emitterLifetime=t.emitterLifetime||-1,this.maxParticles=t.maxParticles>0?t.maxParticles:1e3,this.addAtBack=!!t.addAtBack,this.rotation=0,this.ownerPos.set(0),t.pos?this.spawnPos.copyFrom(t.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===t.emit||!!t.emit,this.autoUpdate=!!t.autoUpdate;const e=t.behaviors.map((t=>{const e=it.knownBehaviors[t.type];return e?new e(t.config):(console.error(`Unknown behavior: ${t.type}`),null)})).filter((t=>!!t));e.push(et),e.sort(((t,e)=>t===et?e.order===v.Spawn?1:-1:e===et?t.order===v.Spawn?-1:1:t.order-e.order)),this.initBehaviors=e.slice(),this.updateBehaviors=e.filter((t=>t!==et&&t.updateParticle)),this.recycleBehaviors=e.filter((t=>t!==et&&t.recycleParticle))}getBehavior(t){return it.knownBehaviors[t]&&this.initBehaviors.find((e=>e instanceof it.knownBehaviors[t]))||null}fillPool(t){for(;t>0;--t){const t=new Z(this);t.next=this._poolFirst,this._poolFirst=t}}recycle(t,e=!1){for(let i=0;i<this.recycleBehaviors.length;++i)this.recycleBehaviors[i].recycleParticle(t,!e);t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t===this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount}rotate(t){if(this.rotation===t)return;const e=t-this.rotation;this.rotation=t,h(e,this.spawnPos),this._posChanged=!0}updateSpawnPos(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e}updateOwnerPos(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(t){this._emit=!!t,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){this._autoUpdate&&!t?tt.remove(this.update,this):!this._autoUpdate&&t&&tt.add(this.update,this),this._autoUpdate=!!t}playOnceAndDestroy(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t}playOnce(t){this.emit=!0,this._completeCallback=t}update(t){if("number"!=typeof t&&(t=t.deltaTime),this._autoUpdate&&(t=.001*tt.elapsedMS),!this._parent)return;for(let e,i=this._activeParticlesFirst;i;i=e)if(e=i.next,i.age+=t,i.age>i.maxLife||i.age<0)this.recycle(i);else{let e=i.age*i.oneOverLife;this.customEase&&(e=4===this.customEase.length?this.customEase(e,0,1,1):this.customEase(e)),i.agePercent=e;for(let e=0;e<this.updateBehaviors.length;++e)if(this.updateBehaviors[e].updateParticle(i,t)){this.recycle(i);break}}let e,i;this._prevPosIsValid&&(e=this._prevEmitterPos.x,i=this._prevEmitterPos.y);const s=this.ownerPos.x+this.spawnPos.x,a=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let r,n;if(this._prevPosIsValid&&this._posChanged){const o=1+this._spawnTimer/t;r=(s-e)*o+e,n=(a-i)*o+i}else r=s,n=a;let o=null,l=null;for(let t=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),e=0;e<t;++e){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let t,e;(t=this.minLifetime===this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=t)||(this._poolFirst?(e=this._poolFirst,this._poolFirst=this._poolFirst.next,e.next=null):e=new Z(this),e.init(t),this.addAtBack?this._parent.addChildAt(e,0):this._parent.addChild(e),o?(l.next=e,e.prev=l,l=e):l=o=e,++this.particleCount)}if(o){this._activeParticlesLast?(this._activeParticlesLast.next=o,o.prev=this._activeParticlesLast,this._activeParticlesLast=l):(this._activeParticlesFirst=o,this._activeParticlesLast=l);for(let t=0;t<this.initBehaviors.length;++t){const e=this.initBehaviors[t];if(e===et)for(let t,e=o;e;e=t){t=e.next,0!==this.rotation&&(h(this.rotation,e.position),e.rotation+=this.rotation),e.position.x+=r,e.position.y+=n,e.age+=-this._spawnTimer;let i=e.age*e.oneOverLife;this.customEase&&(i=4===this.customEase.length?this.customEase(i,0,1,1):this.customEase(i)),e.agePercent=i}else e.initParticles(o)}for(let t,e=o;e;e=t){t=e.next;for(let t=0;t<this.updateBehaviors.length;++t)if(this.updateBehaviors[t].updateParticle(e,-this._spawnTimer)){this.recycle(e);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=s,this._prevEmitterPos.y=a,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const t=this._completeCallback;this._completeCallback=null,t()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const t=this.ownerPos.x+this.spawnPos.x,e=this.ownerPos.y+this.spawnPos.y;let i=null,s=null;for(let t=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),e=0;e<t;++e){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let t,e;this._poolFirst?(t=this._poolFirst,this._poolFirst=this._poolFirst.next,t.next=null):t=new Z(this),e=this.minLifetime===this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,t.init(e),this.addAtBack?this._parent.addChildAt(t,0):this._parent.addChild(t),i?(s.next=t,t.prev=s,s=t):s=i=t,++this.particleCount}if(i){this._activeParticlesLast?(this._activeParticlesLast.next=i,i.prev=this._activeParticlesLast,this._activeParticlesLast=s):(this._activeParticlesFirst=i,this._activeParticlesLast=s);for(let s=0;s<this.initBehaviors.length;++s){const a=this.initBehaviors[s];if(a===et)for(let s,a=i;a;a=s)s=a.next,0!==this.rotation&&(h(this.rotation,a.position),a.rotation+=this.rotation),a.position.x+=t,a.position.y+=e;else a.initParticles(i)}}}cleanup(){let t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){let t;this.autoUpdate=!1,this.cleanup();for(let e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}}it.knownBehaviors={},it.registerBehavior(y),it.registerBehavior(M),it.registerBehavior(B),it.registerBehavior(R),it.registerBehavior(F),it.registerBehavior(T),it.registerBehavior(k),it.registerBehavior(A),it.registerBehavior(I),it.registerBehavior(N),it.registerBehavior(D),it.registerBehavior(W),it.registerBehavior(G),it.registerBehavior(V),it.registerBehavior(X),it.registerBehavior($),it.registerBehavior(j),it.registerBehavior(Q),it.registerBehavior(Y),it.registerBehavior(z),it.registerBehavior(H),it.registerBehavior(J),it.registerBehavior(K),t.Emitter=it,t.Particle=Z,t.ParticleUtils=g,t.PropertyList=L,t.PropertyNode=a,t.upgradeConfig=function(t,e){if("behaviors"in t)return t;const i={lifetime:t.lifetime,ease:t.ease,particlesPerWave:t.particlesPerWave,frequency:t.frequency,spawnChance:t.spawnChance,emitterLifetime:t.emitterLifetime,maxParticles:t.maxParticles,addAtBack:t.addAtBack,pos:t.pos,emit:t.emit,autoUpdate:t.autoUpdate,behaviors:[]};if(t.alpha)if("start"in t.alpha)if(t.alpha.start===t.alpha.end)1!==t.alpha.start&&i.behaviors.push({type:"alphaStatic",config:{alpha:t.alpha.start}});else{const e={list:[{time:0,value:t.alpha.start},{time:1,value:t.alpha.end}]};i.behaviors.push({type:"alpha",config:{alpha:e}})}else 1===t.alpha.list.length?1!==t.alpha.list[0].value&&i.behaviors.push({type:"alphaStatic",config:{alpha:t.alpha.list[0].value}}):i.behaviors.push({type:"alpha",config:{alpha:t.alpha}});if(t.acceleration&&(t.acceleration.x||t.acceleration.y)){let e,s;"start"in t.speed?(e=t.speed.start*(t.speed.minimumSpeedMultiplier??1),s=t.speed.start):(e=t.speed.list[0].value*(t.minimumSpeedMultiplier??1),s=t.speed.list[0].value),i.behaviors.push({type:"moveAcceleration",config:{accel:t.acceleration,minStart:e,maxStart:s,rotate:!t.noRotation,maxSpeed:t.maxSpeed}})}else if(t.extraData?.path){let e,s;"start"in t.speed?(s=t.speed.minimumSpeedMultiplier??1,e=t.speed.start===t.speed.end?{list:[{time:0,value:t.speed.start}]}:{list:[{time:0,value:t.speed.start},{time:1,value:t.speed.end}]}):(e=t.speed,s=t.minimumSpeedMultiplier??1),i.behaviors.push({type:"movePath",config:{path:t.extraData.path,speed:e,minMult:s}})}else if(t.speed)if("start"in t.speed)if(t.speed.start===t.speed.end)i.behaviors.push({type:"moveSpeedStatic",config:{min:t.speed.start*(t.speed.minimumSpeedMultiplier??1),max:t.speed.start}});else{const e={list:[{time:0,value:t.speed.start},{time:1,value:t.speed.end}]};i.behaviors.push({type:"moveSpeed",config:{speed:e,minMult:t.speed.minimumSpeedMultiplier}})}else 1===t.speed.list.length?i.behaviors.push({type:"moveSpeedStatic",config:{min:t.speed.list[0].value*(t.minimumSpeedMultiplier??1),max:t.speed.list[0].value}}):i.behaviors.push({type:"moveSpeed",config:{speed:t.speed,minMult:t.minimumSpeedMultiplier??1}});if(t.scale)if("start"in t.scale){const e=t.scale.minimumScaleMultiplier??1;if(t.scale.start===t.scale.end)i.behaviors.push({type:"scaleStatic",config:{min:t.scale.start*e,max:t.scale.start}});else{const s={list:[{time:0,value:t.scale.start},{time:1,value:t.scale.end}]};i.behaviors.push({type:"scale",config:{scale:s,minMult:e}})}}else if(1===t.scale.list.length){const e=t.minimumScaleMultiplier??1,s=t.scale.list[0].value;i.behaviors.push({type:"scaleStatic",config:{min:s*e,max:s}})}else i.behaviors.push({type:"scale",config:{scale:t.scale,minMult:t.minimumScaleMultiplier??1}});if(t.color)if("start"in t.color)if(t.color.start===t.color.end)"ffffff"!==t.color.start&&i.behaviors.push({type:"colorStatic",config:{color:t.color.start}});else{const e={list:[{time:0,value:t.color.start},{time:1,value:t.color.end}]};i.behaviors.push({type:"color",config:{color:e}})}else 1===t.color.list.length?"ffffff"!==t.color.list[0].value&&i.behaviors.push({type:"colorStatic",config:{color:t.color.list[0].value}}):i.behaviors.push({type:"color",config:{color:t.color}});if(t.rotationAcceleration||t.rotationSpeed?.min||t.rotationSpeed?.max?i.behaviors.push({type:"rotation",config:{accel:t.rotationAcceleration||0,minSpeed:t.rotationSpeed?.min||0,maxSpeed:t.rotationSpeed?.max||0,minStart:t.startRotation?.min||0,maxStart:t.startRotation?.max||0}}):(t.startRotation?.min||t.startRotation?.max)&&i.behaviors.push({type:"rotationStatic",config:{min:t.startRotation?.min||0,max:t.startRotation?.max||0}}),t.noRotation&&i.behaviors.push({type:"noRotation",config:{}}),t.blendMode&&"normal"!==t.blendMode&&i.behaviors.push({type:"blendMode",config:{blendMode:t.blendMode}}),Array.isArray(e)&&"string"!=typeof e[0]&&"framerate"in e[0]){for(let t=0;t<e.length;++t)"matchLife"===e[t].framerate&&(e[t].framerate=-1);i.behaviors.push({type:"animatedRandom",config:{anims:e}})}else"string"!=typeof e&&"framerate"in e?("matchLife"===e.framerate&&(e.framerate=-1),i.behaviors.push({type:"animatedSingle",config:{anim:e}})):t.orderedArt&&Array.isArray(e)?i.behaviors.push({type:"textureOrdered",config:{textures:e}}):Array.isArray(e)?i.behaviors.push({type:"textureRandom",config:{textures:e}}):i.behaviors.push({type:"textureSingle",config:{texture:e}});if("burst"===t.spawnType)i.behaviors.push({type:"spawnBurst",config:{start:t.angleStart||0,spacing:t.particleSpacing,distance:0}});else if("point"===t.spawnType)i.behaviors.push({type:"spawnPoint",config:{}});else{let e;"ring"===t.spawnType?e={type:"torus",data:{x:t.spawnCircle.x,y:t.spawnCircle.y,radius:t.spawnCircle.r,innerRadius:t.spawnCircle.minR,affectRotation:!0}}:"circle"===t.spawnType?e={type:"torus",data:{x:t.spawnCircle.x,y:t.spawnCircle.y,radius:t.spawnCircle.r,innerRadius:0,affectRotation:!1}}:"rect"===t.spawnType?e={type:"rect",data:t.spawnRect}:"polygonalChain"===t.spawnType&&(e={type:"polygonalChain",data:t.spawnPolygon}),e&&i.behaviors.push({type:"spawnShape",config:e})}return i}}(this.PIXI.particles=this.PIXI.particles||{},PIXI);
//# sourceMappingURL=particle-emitter.min.js.map